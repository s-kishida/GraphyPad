<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GraphyPad | 高校生のためのグラフ作成ツール</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fira+Code&display=swap"
        rel="stylesheet">
</head>

<body>
    <aside class="sidebar">
        <div class="logo">
            <h1>GraphyPad</h1>
        </div>

        <div class="section">
            <h2 class="section-title">データ入力</h2>
            <div class="upload-area" id="drop-zone">
                <input type="file" id="csv-upload" accept=".csv" style="display: none;">
                <p>CSVファイルをドロップ or クリック</p>
            </div>
            <div id="file-info" style="margin-top: 8px; font-size: 0.8rem; display: none;">
                選択中: <span id="filename"></span>
            </div>
        </div>

        <div id="config-panel" style="display: none;">
            <div class="section">
                <h2 class="section-title">データ計算 (オプション)</h2>
                <div class="input-group">
                    <label>新しい列名</label>
                    <input type="text" id="calc-new-col" placeholder="例: time_squared">
                </div>
                <div class="grid-inputs"
                    style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 4px; align-items: center;">
                    <select id="calc-col-a"></select>
                    <span>×</span>
                    <input type="number" id="calc-factor" value="1">
                </div>
                <button class="btn btn-secondary" style="margin-top: 8px; font-size: 0.8rem; padding: 6px;"
                    id="calc-btn">列を追加</button>
            </div>

            <div class="section">
                <h2 class="section-title">軸設定</h2>
                <div class="input-group">
                    <label for="x-axis">X軸の列</label>
                    <select id="x-axis"></select>
                </div>
                <div class="input-group">
                    <label>Y軸の列 (複数選択可)</label>
                    <div id="y-axis-container"
                        style="background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 6px; padding: 10px; max-height: 150px; overflow-y: auto;">
                        <!-- Checkboxes will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">ラベル設定</h2>
                <div class="input-group">
                    <label>X軸の設定</label>
                    <div class="grid-inputs" style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                        <input type="text" id="x-name" placeholder="名前 (例: 時間)">
                        <input type="text" id="x-unit" placeholder="単位 (例: s)">
                    </div>
                </div>
                <div class="input-group">
                    <label>Y軸の設定</label>
                    <div class="grid-inputs" style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                        <input type="text" id="y-name" placeholder="名前 (例: 速度)">
                        <input type="text" id="y-unit" placeholder="単位 (例: m/s)">
                    </div>
                </div>
                <div class="input-group">
                    <label for="title">グラフのタイトル</label>
                    <input type="text" id="title" placeholder="実験データ">
                </div>
                <div class="grid-inputs" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                    <div class="input-group">
                        <label>タイトル字</label>
                        <input type="number" id="font-title" value="24">
                    </div>
                    <div class="input-group">
                        <label>軸ラベル字</label>
                        <input type="number" id="font-label" value="18">
                    </div>
                    <div class="input-group">
                        <label>目盛り字</label>
                        <input type="number" id="font-tick" value="16">
                    </div>
                </div>
            </div>
            <div class="section">
                <h2 class="section-title">プロット設定</h2>
                <div class="grid-inputs" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div class="input-group">
                        <label>マーカー大</label>
                        <input type="number" id="marker-size" value="8" step="1">
                    </div>
                    <div class="input-group">
                        <label>線の太さ</label>
                        <input type="number" id="line-width" value="3" step="0.5">
                    </div>
                </div>
            </div>
            <div class="section">
                <h2 class="section-title">目盛り設定</h2>
                <div class="grid-inputs" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div class="input-group">
                        <label>X最小</label>
                        <input type="number" id="x-min" placeholder="Auto">
                    </div>
                    <div class="input-group">
                        <label>X最大</label>
                        <input type="number" id="x-max" placeholder="Auto">
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">グラフのサイズ (比率)</h2>
                <div class="grid-inputs" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div class="input-group">
                        <label>横幅</label>
                        <input type="number" id="graph-width" value="10" step="0.5">
                    </div>
                    <div class="input-group">
                        <label>縦幅</label>
                        <input type="number" id="graph-height" value="6" step="0.5">
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" id="generate-btn">
                <span>グラフを更新</span>
            </button>
        </div>

        <div class="section" id="no-data-msg">
            <p style="font-size: 0.85rem; color: var(--text-secondary);">CSVを読み込むと設定が表示されます</p>
        </div>
    </aside>

    <main class="main-content">
        <div class="graph-container">
            <div class="loading-overlay" id="loader">
                <div class="spinner"></div>
                <p>描画中...</p>
            </div>
            <div id="placeholder" class="placeholder-text">
                <h3>データがありません</h3>
                <p>左側のメニューからCSVを読み込んでください</p>
            </div>
            <img id="graph-image" style="display: none;">
        </div>

        <div class="code-wrapper">
            <div class="code-header">
                <span class="code-lang">python code</span>
                <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.7rem; width: auto;"
                    onclick="copyCode()">Copy</button>
            </div>
            <pre id="python-code"># グラフが生成されるとここにコードが表示されます</pre>
        </div>
    </main>

    <script src="/static/script.js"></script>
</body>

</html>